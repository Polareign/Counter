print("=== MACRO DEBUG START ===");
print("Argument received: " + getArgument());

if (getArgument() == "") {
    print("ERROR: No argument provided");
    exit();
}

// Try to open the image
open(getArgument());
print("Image opened: " + getTitle());

// Simple processing
run("8-bit");
setAutoThreshold("Default");
run("Convert to Mask");
run("Analyze Particles...", "size=100-Infinity show=Nothing display clear summarize");

count = nResults;
print("Count: " + count);
print("=== MACRO DEBUG END ===");